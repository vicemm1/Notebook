---
title: 需求1.echarts直线图折线图等线性图中的 label无法触发tooltip提示框的问题。
created: '2024-05-21T10:10:38.405Z'
modified: '2024-05-23T02:43:50.737Z'
---

### 需求1.echarts直线图折线图等线性图中的 label无法触发tooltip提示框的问题。
```
// 先在axis上设置 triggerEvent：true 允许触发mouseover事件。
      this.chart.on('mouseover',function(params){
        // console.log(params);
        // 图表鼠标经过y轴进行参数判断和展示
        if( params.componentType == 'xAxis' || params.componentType == 'yAxis'){
          // console.log(params)
          
          // 获取鼠标位置计算提示框显示位置
          let that = this;
          let offsetX = params.event.offsetX;
          let offsetY = params.event.offsetY;
          

          // 设置永久展示属性 当不设置改属性会出现 提示框秒消失的情况  动态更改formatter内容
          this.setOption({
            tooltip:{
              alwaysShowContent: true,
              formatter: item=>{
                return params.value;
              }
            }

          });
          // 由于在图表外其他时间回调参数不带当前位置dataIndex,采用该方法获取当前dataIndex
          let cIndex=this.convertFromPixel({seriesIndex:0},[params.event.offsetX, params.event.offsetY])[params.componentType == 'xAxis'?0:1];
          // 主动触发提示框 性能方面可以考虑防抖
          that.dispatchAction({
            type:"showTip",
            seriesIndex: 0,
            dataIndex: cIndex,
            position: [offsetX,offsetY]
          })
        }
      })
      
      this.chart.on('mouseout',function(params){
        // 鼠标移出时，取消提示框永久展示属性 并将formatter替换回去
        this.setOption({
            tooltip:{
              alwaysShowContent: false,
              formatter: params=>{
                return that.beforeFormatter(params);
              }
            }
          })
      })
    },
```
要求：左侧label在鼠标hover后显示完整名称。
方案1.在触发mouseover事件后，动态更新echarts中tooltip内容，触发mouseout之后，再将echart，tooltip改回去。
缺点：频繁变动dom，对性能影响较大

采用了这种方式，出现了position提示框定位不准确的问题（提示框位置异常），可能是dispatchAction的问题，通过触发时固定position，移开后还原position解决。

方案2.重写新tooltip，非echarts自带api中的tooltips，缺点就是样式风格可能比较难统一。

方案3：动态控制tooltip中的内容，display等，缺点：对源代码进行修改，可能会增加影响其他功能的可能性。


