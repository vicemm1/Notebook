---
title: 需求4 全局图表顺序控制
created: '2024-05-30T05:25:39.960Z'
modified: '2024-06-05T08:39:30.772Z'
---

# 需求4 全局图表顺序控制
1. 子图表增加选项顺序选项。
2. 增加全局选项控制选项。
3. 在全局变更后可以进行还原。

问题1 默认配置项order由后端给出（getChartInfo）后台默认升序，新增图表和修改图表无法区分，因此覆盖后端传来的order信息会导致修改图表时，无法显示原先保存的数据。

问题2 全局配置未生效，父组件传递global参数，但是子组件未使用该参数。

问题3 恢复默认设置需要恢复到哪个状态，仅仅记录上一次修改状态，还是说全局更改的设置仅仅展示不保存到数据库。
恢复到全局默认状态和用户操作无关。

问题4 后端排序or前端排序，排序时要有优先级，先根据全局排序规则排序，若全局排序规则为normal则根据单独顺序排序。 有问题！！!! 单个图表排序设置在全局设置修改后仍保持较高优先级。解决办法：全局修改后在单个图表的样式拷贝一份，当单个图表的样式发送变更时，更新在单个图表中存储的全局样式配置。



逻辑梳理：
前端以orderType优先。前端全局排序调整后，后端根据值sortType进行变更每个图表的orderType值。
当为前端传给后端的sortType为normal时，后端恢复每个表的默认排序（打分题默认选项顺序，非打分题默认倒序），据此修改每个图表的orderType值。
当前端传给后端sortType为option时，后端修改每个图表的orderType值为0
当前端传给后端sortType为asc时，后端修改每个图表的orderType值为1
当前端传给后端sortType为desc时，后端修改每个图表的orderType值为2

sortType normal     orderType 3
在单个图表中由前端控制orderType的转换，非打分题转换成2，打分题转换成1

